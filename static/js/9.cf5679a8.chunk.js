(this.webpackJsonpfixabay=this.webpackJsonpfixabay||[]).push([[9],{152:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(1),s=r.n(n),i=r(10);function a(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var u=s.a.createContext(a()),o=r(94);function c(e,t){var r=s.a.useRef(!1),n=s.a.useState(0)[1],a=Object(o.b)(),c=s.a.useContext(u),l=a.defaultQueryObserverOptions(e);l.optimisticResults=!0,l.onError&&(l.onError=i.a.batchCalls(l.onError)),l.onSuccess&&(l.onSuccess=i.a.batchCalls(l.onSuccess)),l.onSettled&&(l.onSettled=i.a.batchCalls(l.onSettled)),l.suspense&&"number"!==typeof l.staleTime&&(l.staleTime=1e3),(l.suspense||l.useErrorBoundary)&&(c.isReset()||(l.retryOnMount=!1));var h=s.a.useState((function(){return new t(a,l)}))[0],d=h.getOptimisticResult(l);if(s.a.useEffect((function(){r.current=!0,c.clearReset();var e=h.subscribe(i.a.batchCalls((function(){r.current&&n((function(e){return e+1}))})));return h.updateResult(),function(){r.current=!1,e()}}),[c,h]),s.a.useEffect((function(){h.setOptions(l,{listeners:!1})}),[l,h]),l.suspense&&d.isLoading)throw h.fetchOptimistic(l).then((function(e){var t=e.data;null==l.onSuccess||l.onSuccess(t),null==l.onSettled||l.onSettled(t,null)})).catch((function(e){c.clearReset(),null==l.onError||l.onError(e),null==l.onSettled||l.onSettled(void 0,e)}));if((l.suspense||l.useErrorBoundary)&&d.isError&&!d.isFetching)throw d.error;return"tracked"===l.notifyOnChangeProps&&(d=h.trackResult(d)),d}},188:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(7),s=r(20),i=r(3),a=r(10),u=r(26),o=r(21),c=r(37),l=r(18),h=function(e){function t(t,r){var n;return(n=e.call(this)||this).client=t,n.options=r,n.trackedProps=[],n.previousSelectError=null,n.bindMethods(),n.setOptions(r),n}Object(s.a)(t,e);var r=t.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),d(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return e=this.currentQuery,!1!==(t=this.options).enabled&&("always"===t.refetchOnReconnect||!1!==t.refetchOnReconnect&&p(e,t));var e,t},r.shouldFetchOnWindowFocus=function(){return e=this.currentQuery,!1!==(t=this.options).enabled&&("always"===t.refetchOnWindowFocus||!1!==t.refetchOnWindowFocus&&p(e,t));var e,t},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(e,t){var r=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();var s=this.hasListeners();s&&f(this.currentQuery,n,this.options,r)&&this.executeFetch(),this.updateResult(t),!s||this.currentQuery===n&&this.options.enabled===r.enabled&&this.options.staleTime===r.staleTime||this.updateStaleTimeout(),!s||this.currentQuery===n&&this.options.enabled===r.enabled&&this.options.refetchInterval===r.refetchInterval||this.updateRefetchInterval()},r.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),r=this.client.getQueryCache().build(this.client,t);return this.createResult(r,t)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(e){var t=this,r={};return Object.keys(e).forEach((function(n){Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:function(){var r=n;return t.trackedProps.includes(r)||t.trackedProps.push(r),e[r]}})})),r},r.getNextResult=function(e){var t=this;return new Promise((function(r,n){var s=t.subscribe((function(t){t.isFetching||(s(),t.isError&&(null==e?void 0:e.throwOnError)?n(t.error):r(t))}))}))},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(e){return this.fetch(e)},r.fetchOptimistic=function(e){var t=this,r=this.client.defaultQueryObserverOptions(e),n=this.client.getQueryCache().build(this.client,r);return n.fetch().then((function(){return t.createResult(n,r)}))},r.fetch=function(e){var t=this;return this.executeFetch(e).then((function(){return t.updateResult(),t.currentResult}))},r.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(i.i)),t},r.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!i.e&&!this.currentResult.isStale&&Object(i.f)(this.options.staleTime)){var t=Object(i.q)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((function(){e.currentResult.isStale||e.updateResult()}),t)}},r.updateRefetchInterval=function(){var e=this;this.clearRefetchInterval(),!i.e&&!1!==this.options.enabled&&Object(i.f)(this.options.refetchInterval)&&(this.refetchIntervalId=setInterval((function(){(e.options.refetchIntervalInBackground||u.a.isFocused())&&e.executeFetch()}),this.options.refetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval()},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0},r.clearRefetchInterval=function(){clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0},r.createResult=function(e,t){var r,n=this.currentQuery,s=this.options,a=this.currentResult,u=this.currentResultState,o=this.currentResultOptions,l=e!==n,h=l?e.state:this.currentQueryInitialState,v=l?this.currentResult:this.previousQueryResult,b=e.state,y=b.dataUpdatedAt,g=b.error,O=b.errorUpdatedAt,m=b.isFetching,R=b.status,S=!1,P=!1;if(t.optimisticResults){var j=this.hasListeners(),Q=!j&&d(e,t),x=j&&f(e,n,t,s);(Q||x)&&(m=!0,y||(R="loading"))}if(t.keepPreviousData&&!b.dataUpdateCount&&(null==v?void 0:v.isSuccess)&&"error"!==R)r=v.data,y=v.dataUpdatedAt,R=v.status,S=!0;else if(t.select&&"undefined"!==typeof b.data)if(a&&b.data===(null==u?void 0:u.data)&&t.select===(null==o?void 0:o.select)&&!this.previousSelectError)r=a.data;else try{r=t.select(b.data),!1!==t.structuralSharing&&(r=Object(i.m)(null==a?void 0:a.data,r)),this.previousSelectError=null}catch(I){Object(c.a)().error(I),g=I,this.previousSelectError=I,O=Date.now(),R="error"}else r=b.data;if("undefined"!==typeof t.placeholderData&&"undefined"===typeof r&&"loading"===R){var E;if((null==a?void 0:a.isPlaceholderData)&&t.placeholderData===(null==o?void 0:o.placeholderData))E=a.data;else if(E="function"===typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&"undefined"!==typeof E)try{E=t.select(E),!1!==t.structuralSharing&&(E=Object(i.m)(null==a?void 0:a.data,E)),this.previousSelectError=null}catch(I){Object(c.a)().error(I),g=I,this.previousSelectError=I,O=Date.now(),R="error"}"undefined"!==typeof E&&(R="success",r=E,P=!0)}return{status:R,isLoading:"loading"===R,isSuccess:"success"===R,isError:"error"===R,isIdle:"idle"===R,data:r,dataUpdatedAt:y,error:g,errorUpdatedAt:O,failureCount:b.fetchFailureCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>h.dataUpdateCount||b.errorUpdateCount>h.errorUpdateCount,isFetching:m,isLoadingError:"error"===R&&0===b.dataUpdatedAt,isPlaceholderData:P,isPreviousData:S,isRefetchError:"error"===R&&0!==b.dataUpdatedAt,isStale:p(e,t),refetch:this.refetch,remove:this.remove}},r.shouldNotifyListeners=function(e,t){if(!t)return!0;if(e===t)return!1;var r=this.options,n=r.notifyOnChangeProps,s=r.notifyOnChangePropsExclusions;if(!n&&!s)return!0;if("tracked"===n&&!this.trackedProps.length)return!0;var i="tracked"===n?this.trackedProps:n;return Object.keys(e).some((function(r){var n=r,a=e[n]!==t[n],u=null==i?void 0:i.some((function(e){return e===r})),o=null==s?void 0:s.some((function(e){return e===r}));return a&&!o&&(!i||u)}))},r.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!Object(i.o)(this.currentResult,t)){var r={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(r.listeners=!0),this.notify(Object(n.a)({},r,e))}},r.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},r.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"!==e.type||Object(l.c)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},r.notify=function(e){var t=this;a.a.batch((function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)})),e.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})}))},t}(o.a);function d(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||function(e,t){return!1!==t.enabled&&e.state.dataUpdatedAt>0&&("always"===t.refetchOnMount||!1!==t.refetchOnMount&&p(e,t))}(e,t)}function f(e,t,r,n){return!1!==r.enabled&&(e!==t||!1===n.enabled)&&p(e,r)}function p(e,t){return e.isStaleByTime(t.staleTime)}},95:function(e,t,r){"use strict";r.r(t);var n=r(13),s=r.n(n),i=r(30),a=r(6),u=r(5),o=r(1),c=r(8),l=r(94),h=r(108),d=r(17),f=r(49),p=r(7),v=r(20),b=r(188),y=r(55),g=function(e){function t(t,r){return e.call(this,t,r)||this}Object(v.a)(t,e);var r=t.prototype;return r.bindMethods=function(){e.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},r.setOptions=function(t){e.prototype.setOptions.call(this,Object(p.a)({},t,{behavior:Object(y.c)()}))},r.getOptimisticResult=function(t){return t.behavior=Object(y.c)(),e.prototype.getOptimisticResult.call(this,t)},r.fetchNextPage=function(e){return this.fetch({cancelRefetch:!0,throwOnError:null==e?void 0:e.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:null==e?void 0:e.pageParam}}})},r.fetchPreviousPage=function(e){return this.fetch({cancelRefetch:!0,throwOnError:null==e?void 0:e.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:null==e?void 0:e.pageParam}}})},r.createResult=function(t,r){var n,s,i,a,u,o,c=t.state,l=e.prototype.createResult.call(this,t,r);return Object(p.a)({},l,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Object(y.a)(r,null==(n=c.data)?void 0:n.pages),hasPreviousPage:Object(y.b)(r,null==(s=c.data)?void 0:s.pages),isFetchingNextPage:c.isFetching&&"forward"===(null==(i=c.fetchMeta)||null==(a=i.fetchMore)?void 0:a.direction),isFetchingPreviousPage:c.isFetching&&"backward"===(null==(u=c.fetchMeta)||null==(o=u.fetchMore)?void 0:o.direction)})},t}(b.a),O=r(3),m=r(152);var R=r(126),S=r.n(R),P=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,n,i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pageIndex,n=t.setPageIndex,i=t.params,n(r+1),e.next=4,S.a.get("".concat(h.a,"&page=").concat(r+1),{params:i});case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var j=function(e){var t=e.pageIndex,r=e.setPageIndex,n=e.params;return function(e,t,r){var n=Object(O.k)(e,t,r);return Object(m.a)(n,g)}(["images"],(function(){return P({pageIndex:t,setPageIndex:r,params:n})}),{refetchOnWindowFocus:!1,getNextPageParam:function(e){return e.totalHits!==e.hits.length*t&&t}})},Q=r(135),x=r(189),E=r(190),I=r(36),w=r(2);t.default=function(){var e=Object(c.g)(),t=Object(l.b)(),r=Object(f.e)(e.pathname.replace(d.b.reactQuery.path,"")),n=Object(o.useState)(0),p=Object(u.a)(n,2),v=p[0],b=p[1],y=Object(f.f)(e.search,"q")||"",g=Object(Q.a)(h.d.recentSearches),O=Object(u.a)(g,2),m=O[0],R=O[1],S=Object(o.useState)({per_page:h.c,image_type:r,q:y||""}),P=Object(u.a)(S,2),C=P[0],k=P[1],F=j({pageIndex:v,setPageIndex:b,params:C}),T=F.isLoading,U=F.isFetchingNextPage,M=F.isError,N=F.data,D=F.fetchNextPage,A=F.hasNextPage,L=N?N.pages.flatMap((function(e){return e.hits})):[],q=Object(o.useCallback)((function(){k(Object(a.a)(Object(a.a)({},C),{},{image_type:r,q:y})),b(0),t.removeQueries("images",{exact:!0})}),[r,C,t,y]);Object(o.useEffect)((function(){y.length&&R((null===m||void 0===m?void 0:m.length)?Array.from(new Set(m.concat(y).slice(m.length>1?-5:0))):[y]),(C.image_type!==r||C.q!==y)&&q()}),[r,y]);var B=Object(o.useCallback)(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A&&!U){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,D();case 4:case"end":return e.stop()}}),e)}))),[D,A,U]);return Object(w.jsx)(x.a,{isLoading:T,isError:M,menu:Object.values(d.b).filter((function(e){var t=e.isPage,r=e.isNave;return t&&r})).map((function(e){return{path:e.path,name:e.name}})),title:d.a.reactQuery.name,description:d.a.reactQuery.name,path:d.a.reactQuery.path,children:T||U||A||L.length?Object(w.jsx)(E.a,{images:L,hasMore:!!A,fetchMoreData:B}):Object(w.jsx)(I.a,{isSearch:!0})})}}}]);
//# sourceMappingURL=9.cf5679a8.chunk.js.map